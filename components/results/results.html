<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Resultaten</title>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/css/results.css" type="text/css">
  <link rel="manifest" href="../../manifest.json">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<body>

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
  </head>
  <body>
    <!-- Include the mobile menu -->
    <div id="mobileMenuContainer"></div>
    
      <div class="news-cards mt-4">
        <!-- Card 1 -->
        <div class="main-card col-md-12 mb-3">
          <a href="/components/news-articles/example-article.html" class="card-link">
            <div class="card horizontal-card">
              <div class="card-img-overlay">
                <h3 class="card-title">
                  Van gegevens naar actie: Hoe survey feedback de
                  gezondheidszorgbeleid hervormt
                </h3>
                <p class="card-text">
                  Verken de <b>tastbare resultaten</b> van het enquêteprogramma terwijl
                  het gegevens omzet in actie. Ontdek de beleidswijzigingen en
                  strategische initiatieven die door zorgorganisaties zijn
                  geïmplementeerd om personeelsuitdagingen aan te pakken en de
                  kwaliteit van de patiëntenzorg te verhogen.
                </p>
              </div>
            </div>
          </a>
        </div>
    <div class="container">
      <div id="progress-container">
        <!-- Display earned flower badges -->
        <div class="flowers-badge-count">
          <h2>Je hebt <span id="flowerCount">0</span> bloemenbadges verdiend!</h2>
        </div>
        <div class="bar-container">
        <div id="progress-bar"></div></div>
        <div id="badges-container">
          <!-- Empty badge slots -->
          <div class="badge" id="badge1" onclick="showModal(1)"></div>
          <div class="badge" id="badge2" onclick="showModal(2)"></div>
          <div class="badge" id="badge3" onclick="showModal(3)"></div>
          <div class="badge" id="badge4" onclick="showModal(4)"></div>
          <div class="badge" id="badge5" onclick="showModal(5)"></div>
          <div class="badge" id="badge6" onclick="showModal(6)"></div>
        </div>
      </div>

  <!-- Modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h2>Flower Information</h2>
      <p>This flower represents your contribution to improving working conditions and healthcare.</p>
      <!-- Additional information about the flower -->
    </div>
  </div>

      
    <div class="results-container mt-4">
      <div class="title-container">
        <h2 class="results-title">Metrics</h2>
      </div>
      <div class="col-md-3 mb-3">
        <a href="/components/surveys/surveys.html" class="card-link">
          <div class="card results-card">
            <img src="/images/surveygraph1.jpg" class="card-img-top" alt="Image 1">
            <div class="card-body">
              <h3 class="card-title">Algemene onderzoeken voltooid</h3>
            </div>
          </div>
        </a>
      </div>
      <div class="col-md-3 mb-3">
        <a href="/components/results/results.html" class="card-link">
          <div class="card results-card">
            <img src="/images/surveyresults2.png" class="card-img-top" alt="Image 2">
            <div class="card-body">
              <h3 class="card-title">Uw Enquêtes</h3>
            </div>
          </div>
        </a>
      </div>
      <div class="col-md-3 mb-3">
        <a href="/components/news/news.html" class="card-link">
          <div class="card results-card">
            <img src="/images/surveyresults3.png" class="card-img-top" alt="Image 3">
            <div class="card-body">
              <h3 class="card-title">Impact op de werklast</h3>
            </div>
          </div>
        </a>
      </div>

      <div class="col-md-3 mb-3">
        <a href="/components/news/news.html" class="card-link">
          <div class="card results-card">
            <img src="/images/surveyresults4.png" class="card-img-top" alt="Image 3">
            <div class="card-body">
              <h3 class="card-title">Impact per afdeling</h3>
            </div>
          </div>
        </a>
      </div>
    </div>
    </div>
  </div>

   <!-- Include the mobile top menu -->
    <div id="dropdownOverlay">
      <div class="dropdown-image">
        <img
          src="/images/pexels-karolina-grabowska-5206931.jpg"
          alt="Profile Image"
        />
      </div>
      <div class="dropdown-content">
        <a href="#">Profile</a>
        <a href="#">Support</a>
        <a href="#">Settings</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Logout</a>
      </div>
      <button class="close-button" onclick="closeDropdown()">&#10006;</button>
    </div>

    <script>
      document.getElementById("mobileMenuContainer").innerHTML = `
        <iframe id="topNavbarFrame" src="/components/top-navbar/top-navbar.html" frameborder="0" width="100%" height="70" position="absolute"></iframe>
      `;

      // Function to update the top navbar title
      function updateTopNavbarTitle(title) {
        const topNavbarFrame = document.getElementById("topNavbarFrame");
        if (topNavbarFrame && topNavbarFrame.contentWindow) {
          topNavbarFrame.contentWindow.postMessage(
            { type: "updateTitle", title },
            "*"
          );
        }
      }

      // Function to close the dropdown
      function closeDropdown() {
        const dropdownOverlay = document.getElementById("dropdownOverlay");
        if (dropdownOverlay) {
          dropdownOverlay.classList.remove("show");
          dropdownOverlay.classList.add("hide");
        }
      }

      // Example: Update the top navbar title when a page is loaded
      window.addEventListener("load", function () {
        const pageTitle = document.title;
        updateTopNavbarTitle(pageTitle);
      });

      // Handle dropdown logic in the parent document
      window.addEventListener("message", function (event) {
        if (event.data && event.data.type === "toggleDropdown") {
          const dropdownOverlay = document.getElementById("dropdownOverlay");
          if (dropdownOverlay) {
            dropdownOverlay.classList.toggle("show");
            // Add class for smooth sliding when closing
            if (!dropdownOverlay.classList.contains("show")) {
              dropdownOverlay.classList.add("hide");
            } else {
              dropdownOverlay.classList.remove("hide");
            }
          }
        }
      });
    </script>


  <!-- Include the mobile bottom menu -->
  <div id="mobileBottomMenuContainer"></div>
  <script>
    document.getElementById("mobileBottomMenuContainer").innerHTML = `
  <iframe src="/components/bottom-menu/bottom-menu.html" frameborder="0" width="100%" height="70" position="fixed" bottom="0"></iframe>
`;
  </script>

  <script>
    // Assume the flowerCount is retrieved from the user's data
    const flowerCount = 3; // Replace this with the actual count

    document.getElementById("flowerCount").innerText = flowerCount;

  var badges = [
    {
      "id": 1,
      "image": "/images/sunflower.png",
      "name": "Flower 1",
      "description": "This flower represents your dedication to healthcare improvement."
    },
    {
      "id": 2,
      "image": "/images/plants/lavender-add.png",
      "name": "Flower 2",
      "description": "This flower symbolizes your commitment to better working conditions."
    },
    {
      "id": 3,
      "image": "/images/plants/rose-add.png",
      "name": "Flower 3",
      "description": "Your contribution with this flower impacts the healthcare industry positively."
    },
  ]



 // Function to load badges from the JSON file
  function loadBadges() {
  // Check if badges array is available
  if (badges && badges.length > 0) {
    // Loop through the available badges (up to the first three)
    for (let i = 0; i < Math.min(badges.length, 3); i++) {
      const badge = badges[i];
      const badgeElement = document.getElementById(`badge${i + 1}`);

      // Check if the badge element exists before updating its properties
      if (badgeElement) {
        badgeElement.style.backgroundImage = `url(${badge.image})`;
        badgeElement.setAttribute('data-name', badge.name);
        badgeElement.setAttribute('data-description', badge.description);
      }
    }
  }
}


// Function to show the modal and update the content based on the badge clicked
function showModal(badgeNumber) {
  const modal = document.getElementById('modal');
  const badgeElement = document.getElementById(`badge${badgeNumber}`);

  // Update modal content based on the badge information
  const badgeName = badgeElement.getAttribute('data-name');
  const badgeDescription = badgeElement.getAttribute('data-description');
  const modalContent = document.querySelector('.modal-content');
  modalContent.innerHTML = `
    <span class="close" onclick="closeModal()">&times;</span>
    <img src="${badgeElement.style.backgroundImage.slice(4, -1).replace(/"/g, "")}" class="modal-badge" alt="Flower Image">
    <h2>${badgeName}</h2>
    <p>${badgeDescription}</p>
    <!-- Additional information about the flower -->
  `;

  modal.style.display = 'block';
}

// Function to close the modal
function closeModal() {
  const modal = document.getElementById('modal');
  modal.style.display = 'none';
}

// You can implement logic to update the progress bar dynamically based on user's progress
// For simplicity, the progress bar is set to 50% in the example.
document.getElementById('progress-bar').style.width = '50%';

// Load badges when the script is executed
loadBadges();
  </script>
</body>
</html>